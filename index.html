<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live Sports Game Viewer</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: #0D1117;
  color: #ffffff;
  scroll-behavior: smooth;
}

.page-container {
  width: 100%;
  max-width: 1200px;
  padding: 0 20px;
  margin: 0 auto;
}

.main-header {
  background: #161b22;
  padding: 20px 0;
  margin-bottom: 30px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

.header-content h1 {
  text-align: center;
  font-size: 32px;
  color: #1E90FF;
  margin-bottom: 10px;
}

.header-content p {
  text-align: center;
  font-size: 16px;
  color: #cccccc;
}

.controls-area {
  background: #161b22;
  padding: 20px;
  border-radius: 10px;
  margin-bottom: 30px;
}

.search-box {
  width: 100%;
  padding: 12px 20px;
  border-radius: 8px;
  border: 1px solid #3f4a56;
  background: #2d333b;
  color: #ffffff;
  font-size: 16px;
  margin-bottom: 15px;
}

.search-box:focus {
  outline: none;
  border-color: #00FFAA;
}

.filter-controls {
  display: flex;
  justify-content: center;
  gap: 20px;
  flex-wrap: wrap;
}

.filter-label {
  display: flex;
  align-items: center;
  gap: 10px;
  background: #1E293B;
  padding: 10px 16px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.3s ease;
}

.filter-label.live-filter {
  color: #00FFAA;
}

.filter-label.hot-filter {
  color: #FF7F50;
}

.filter-label:hover {
  background: #263344;
}

.toggle-switch {
  width: 40px;
  height: 20px;
  background-color: #ccc;
  border-radius: 20px;
  position: relative;
  transition: 0.3s;
}

.toggle-switch::before {
  content: "";
  position: absolute;
  width: 16px;
  height: 16px;
  top: 2px;
  left: 2px;
  background: #fff;
  border-radius: 50%;
  transition: 0.3s;
}

input[type="checkbox"] {
  display: none;
}

input[type="checkbox"]:checked + .toggle-switch {
  background-color: #00FFAA;
}

input[type="checkbox"]:checked + .toggle-switch::before {
  transform: translateX(20px);
}

.hot-filter input[type="checkbox"]:checked + .toggle-switch {
  background-color: #FF7F50;
}

.stats-area {
  background: #161b22;
  padding: 20px;
  border-radius: 10px;
  margin-bottom: 20px;
  display: flex;
  justify-content: space-around;
  flex-wrap: wrap;
  gap: 15px;
}

.stat-item {
  text-align: center;
}

.stat-value {
  font-size: 28px;
  font-weight: bold;
  color: #00FFAA;
}

.stat-label {
  font-size: 14px;
  color: #cccccc;
  margin-top: 5px;
}

.games-list {
  display: flex;
  flex-direction: column;
  gap: 30px;
  margin-bottom: 40px;
}

.category-section {
  background: #161b22;
  padding: 20px;
  border-radius: 10px;
}

.category-header {
  font-size: 22px;
  color: #00FFAA;
  margin-bottom: 15px;
  background: linear-gradient(135deg, #1E293B 0%, #2D3748 100%);
  padding: 12px 20px;
  border-radius: 8px;
  border-left: 4px solid #00FFAA;
  display: flex;
  align-items: center;
  gap: 10px;
}

.game-card {
  background: #0d1117;
  border: 1px solid #30363d;
  padding: 15px;
  border-radius: 8px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: 0.3s;
  margin-bottom: 10px;
}

.game-card:hover {
  background: #1E293B;
  transform: translateX(5px);
}

.game-title {
  font-weight: 600;
  color: #00FFAA;
  flex-grow: 1;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 10px;
}

.game-title:hover {
  color: #1E90FF;
}

.game-status {
  font-size: 13px;
  white-space: nowrap;
  margin-left: 10px;
}

.status-live {
  background: #FF4C4C;
  color: #ffffff;
  padding: 4px 12px;
  border-radius: 20px;
  font-weight: bold;
  animation: pulse 2s infinite;
}

.status-today {
  background: #1E90FF;
  color: #ffffff;
  padding: 4px 12px;
  border-radius: 20px;
  font-weight: bold;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

.loading-message {
  text-align: center;
  padding: 60px 20px;
  font-size: 18px;
  color: #cccccc;
}

.error-message {
  background: #ff4444;
  color: white;
  padding: 20px;
  border-radius: 8px;
  margin: 20px 0;
  text-align: center;
}

.no-results {
  text-align: center;
  padding: 40px;
  color: #888;
  font-size: 18px;
}

.external-link-icon {
  font-size: 12px;
  opacity: 0.6;
}

@media (max-width: 768px) {
  .header-content h1 {
    font-size: 24px;
  }
  
  .filter-controls {
    flex-direction: column;
    gap: 12px;
  }
  
  .game-card {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  
  .game-status {
    margin-left: 0;
  }
}
</style>
</head>
<body>
<header class="main-header">
  <div class="page-container">
    <div class="header-content">
      <h1><i class="fas fa-basketball-ball"></i> Live Sports Game Viewer</h1>
      <p>Live data from v3.gostreameast.link - Updated in real-time</p>
    </div>
  </div>
</header>

<div class="page-container">
  <div class="controls-area">
    <input type="text" id="searchInput" class="search-box" placeholder="Search for games, teams, or sports...">
    
    <div class="filter-controls">
      <label class="filter-label live-filter">
        <input type="checkbox" id="liveOnly">
        <span class="toggle-switch"></span>
        <span>Show Only Live Games</span>
      </label>
      
      <label class="filter-label hot-filter">
        <input type="checkbox" id="hotOnly">
        <span class="toggle-switch"></span>
        <span>Show Only Hot Categories</span>
      </label>
    </div>
  </div>

  <div class="stats-area" id="statsArea">
    <div class="stat-item">
      <div class="stat-value" id="totalGames">-</div>
      <div class="stat-label">Total Games</div>
    </div>
    <div class="stat-item">
      <div class="stat-value" id="liveGames">-</div>
      <div class="stat-label">Live Now</div>
    </div>
    <div class="stat-item">
      <div class="stat-value" id="totalCategories">-</div>
      <div class="stat-label">Sports Categories</div>
    </div>
  </div>

  <div id="loadingMessage" class="loading-message">
    <i class="fas fa-spinner fa-spin"></i> Loading games...
  </div>

  <div id="errorMessage" class="error-message" style="display: none;"></div>

  <div id="gamesList" class="games-list"></div>
  
  <div id="noResults" class="no-results" style="display: none;">
    <i class="fas fa-search"></i><br>
    No games found matching your search.
  </div>
</div>

<script>
// Hot categories list (NBA, NHL, F1, CFB based on the source)
const HOT_CATEGORIES = ['NBA', 'NHL', 'F1', 'CFB'];

// Store parsed games data
let allGames = [];
let allCategories = [];

// Parse the HTML file
async function parseGamesFromHTML() {
  try {
    const response = await fetch('https://corsproxy.io/?https://v3.gostreameast.link/');
    if (!response.ok) throw new Error('Failed to load game data from server');
    
    const htmlText = await response.text();
    const parser = new DOMParser();
    const doc = parser.parseFromString(htmlText, 'text/html');
    
    // Find all category sections
    const categorySections = doc.querySelectorAll('.sports-category-area');
    const categories = [];
    
    categorySections.forEach(section => {
      const categoryId = section.id;
      const categoryTitle = section.querySelector('.category-title-header h2')?.textContent.trim();
      
      if (!categoryTitle) return;
      
      const games = [];
      const matchCards = section.querySelectorAll('.match-card');
      
      matchCards.forEach(card => {
        const linkElement = card.querySelector('.match-title-link');
        const statusElement = card.querySelector('.match-status-info');
        
        if (!linkElement) return;
        
        const title = linkElement.textContent.trim();
        const url = linkElement.href;
        
        let status = 'upcoming';
        let statusText = '';
        let startTime = null;
        
        if (statusElement) {
          const liveBadge = statusElement.querySelector('.live-status-badge');
          const todayBadge = statusElement.querySelector('.today-status-badge');
          
          if (liveBadge) {
            status = 'live';
            statusText = liveBadge.textContent.trim();
          } else if (todayBadge) {
            status = 'today';
            statusText = todayBadge.textContent.trim();
            startTime = todayBadge.getAttribute('data-starttime');
          }
        }
        
        games.push({
          title,
          url,
          status,
          statusText,
          startTime
        });
      });
      
      if (games.length > 0) {
        categories.push({
          id: categoryId,
          name: categoryTitle,
          games: games,
          isHot: HOT_CATEGORIES.includes(categoryTitle.toUpperCase())
        });
      }
    });
    
    return categories;
  } catch (error) {
    console.error('Error parsing HTML:', error);
    throw error;
  }
}

// Render games to the page
function renderGames(categories) {
  const gamesList = document.getElementById('gamesList');
  gamesList.innerHTML = '';
  
  if (categories.length === 0) {
    document.getElementById('noResults').style.display = 'block';
    return;
  }
  
  document.getElementById('noResults').style.display = 'none';
  
  categories.forEach(category => {
    const categorySection = document.createElement('div');
    categorySection.className = 'category-section';
    categorySection.dataset.categoryName = category.name;
    categorySection.dataset.categoryId = category.id;
    
    const header = document.createElement('div');
    header.className = 'category-header';
    
    // Add icon based on sport
    let icon = 'fa-trophy';
    if (category.name.includes('NBA')) icon = 'fa-basketball-ball';
    else if (category.name.includes('NFL')) icon = 'fa-football-ball';
    else if (category.name.includes('NHL')) icon = 'fa-hockey-puck';
    else if (category.name.includes('MLB')) icon = 'fa-baseball-ball';
    else if (category.name.includes('UFC')) icon = 'fa-fist-raised';
    else if (category.name.includes('F1')) icon = 'fa-flag-checkered';
    else if (category.name.includes('CFB') || category.name.includes('College')) icon = 'fa-university';
    else if (category.name.includes('Soccer')) icon = 'fa-futbol';
    
    header.innerHTML = `<i class="fas ${icon}"></i> ${category.name} <span style="color: #888; font-size: 14px; font-weight: normal;">(${category.games.length} games)</span>`;
    
    categorySection.appendChild(header);
    
    category.games.forEach(game => {
      const gameCard = document.createElement('div');
      gameCard.className = 'game-card';
      gameCard.dataset.status = game.status;
      
      const gameTitle = document.createElement('a');
      gameTitle.className = 'game-title';
      gameTitle.href = game.url;
      gameTitle.target = '_blank';
      gameTitle.innerHTML = `${game.title} <i class="fas fa-external-link-alt external-link-icon"></i>`;
      
      const gameStatus = document.createElement('div');
      gameStatus.className = 'game-status';
      
      if (game.status === 'live') {
        gameStatus.innerHTML = `<span class="status-live">âš« LIVE</span>`;
      } else if (game.status === 'today' && game.statusText) {
        gameStatus.innerHTML = `<span class="status-today">${game.statusText}</span>`;
      }
      
      gameCard.appendChild(gameTitle);
      gameCard.appendChild(gameStatus);
      categorySection.appendChild(gameCard);
    });
    
    gamesList.appendChild(categorySection);
  });
}

// Update statistics
function updateStats(categories) {
  let totalGames = 0;
  let liveGames = 0;
  
  categories.forEach(category => {
    totalGames += category.games.length;
    liveGames += category.games.filter(g => g.status === 'live').length;
  });
  
  document.getElementById('totalGames').textContent = totalGames;
  document.getElementById('liveGames').textContent = liveGames;
  document.getElementById('totalCategories').textContent = categories.length;
}

// Filter games based on search and toggles
function filterGames() {
  const searchTerm = document.getElementById('searchInput').value.toLowerCase();
  const liveOnly = document.getElementById('liveOnly').checked;
  const hotOnly = document.getElementById('hotOnly').checked;
  
  const filteredCategories = allCategories.map(category => {
    // Filter by hot category
    if (hotOnly && !category.isHot) {
      return null;
    }
    
    // Filter games within category
    const filteredGames = category.games.filter(game => {
      const matchesSearch = game.title.toLowerCase().includes(searchTerm) || 
                           category.name.toLowerCase().includes(searchTerm);
      const matchesLive = !liveOnly || game.status === 'live';
      
      return matchesSearch && matchesLive;
    });
    
    if (filteredGames.length === 0) return null;
    
    return {
      ...category,
      games: filteredGames
    };
  }).filter(cat => cat !== null);
  
  renderGames(filteredCategories);
}

// Initialize
async function init() {
  const loadingMessage = document.getElementById('loadingMessage');
  const errorMessage = document.getElementById('errorMessage');
  
  try {
    allCategories = await parseGamesFromHTML();
    
    loadingMessage.style.display = 'none';
    
    if (allCategories.length === 0) {
      errorMessage.textContent = 'No games found in the source file.';
      errorMessage.style.display = 'block';
      return;
    }
    
    renderGames(allCategories);
    updateStats(allCategories);
    
    // Add event listeners
    document.getElementById('searchInput').addEventListener('input', filterGames);
    document.getElementById('liveOnly').addEventListener('change', filterGames);
    document.getElementById('hotOnly').addEventListener('change', filterGames);
    
  } catch (error) {
    loadingMessage.style.display = 'none';
    errorMessage.textContent = `Error loading games: ${error.message}. Check your internet connection or try again later.`;
    errorMessage.style.display = 'block';
  }
}

// Start when page loads
document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
